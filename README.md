# Email Notifications Microservice

This microservice is responsible for receiving events through a message broker and sending transactional emails. It also exposes an HTTP endpoint for direct email sending.

### Requirements
- Python 3.9+
- Docker
- Docker Compose

### Configuration
1. **Create and activate a virtual environment:**
    ```
    python -m venv venv
    source venv/bin/activate
    ```

2. **Set up environment variables:**
    Create a `.env` file in the root directory and configure the connection variables for your SMTP server and message broker.
    ```
    SMTP_SERVER=your.smtp.server
    SMTP_PORT=587
    SMTP_USER=your_smtp_user
    SMTP_PASSWORD=your_smtp_password
    SENDER_EMAIL=sender_email@example.com
    RABBITMQ_URL=amqp://guest:guest@rabbitmq:5672/
    ```

### Usage
**Local Mode:**
- **Run the microservice:**
    ```
    uvicorn app.main:app --reload
    ```
  - The microservice will be available at `http://localhost:8000`

**Using Docker:**
1. **Build and start the services:**
    ```
    docker-compose up --build
    ```
    This will create and run the RabbitMQ and email_notifications containers.

2. **Access the RabbitMQ management interface:**
    Open your browser and go to `http://localhost:15672` to view the RabbitMQ management interface. Default credentials are `guest / guest`.

### Testing
- Ensure the containers are running and access `http://127.0.0.1:8000/docs` generated by Uvicorn to perform the corresponding tests.
